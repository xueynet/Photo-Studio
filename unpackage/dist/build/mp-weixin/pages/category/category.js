(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/category/category"],{"0c95":function(t,e,n){"use strict";(function(t){n("7a95");r(n("66fd"));var e=r(n("a07c"));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"1f35":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("a34a"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,r,i,a,u){try{var s=t[a](u),o=s.value}catch(c){return void n(c)}s.done?e(o):Promise.resolve(o).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var u=t.apply(e,n);function s(t){a(u,r,i,s,o,"next",t)}function o(t){a(u,r,i,s,o,"throw",t)}s(void 0)}))}}var s={data:function(){return{tabs:[{cate_name:"服务",cate_count:0,type:"server",list:[]},{cate_name:"产品",cate_count:0,type:"product",tabbar:[]},{cate_name:"新闻",cate_count:0,type:"news",tablist:[{name:"相馆新闻",count:0,newslist:[]},{name:"行业新闻",count:0,newslist:[]}]}],current:0,swiperCurrent:0,newscurrent:0,scrollTop:0,oldScrollTop:0,categorycurrent:0,menuHeight:0,menuItemHeight:0,itemId:"",menuItemPos:[],arr:[],scrollRightTop:0,timer:null,newslist:[]}},onShow:function(){getApp().globalData.hasLogin&&getApp().globalData.hasLaunch?(getApp().globalData.hasLaunch=!1,this.getdata()):getApp().globalData.hasLogin||this.$u.route({url:"/pages/home/login"})},onLoad:function(t){this.option=t,getApp().globalData.hasLogin&&!getApp().globalData.hasLaunch&&this.getdata()},onPullDownRefresh:function(){console.log("refresh"),setTimeout((function(){t.stopPullDownRefresh()}),1e3)},methods:{getdata:function(){var t=this;this.tabs[0].list=this.$defalutdata.servergory,this.tabs[1].tabbar=this.$defalutdata.category,this.tabs[2].tablist[0].newslist=this.$defalutdata.news,this.tabs[2].tablist[1].newslist=this.$defalutdata.news.reverse(),this.current=parseInt(this.option.id)||0,this.swiperCurrent=this.current,this.newslist=this.tabs[2].tablist[0].newslist,setTimeout((function(){t.getMenuItemTop()}),500)},navto:function(t,e){this.$u.route({url:t,params:{id:e}})},tabsChange:function(t){this.swiperCurrent=t},transition:function(t){var e=t.detail.dx;this.$refs.tabs.setDx(e)},animationfinish:function(t){var e=t.detail.current;this.$refs.tabs.setFinishCurrent(e),this.swiperCurrent=e,this.current=e},newstabsChange:function(t){this.newscurrent=t,this.newslist=[];var e=this;setTimeout((function(){e.newslist=e.tabs[2].tablist[t].newslist}),1e3)},swichMenu:function(t){var e=this;return u(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!=e.arr.length){n.next=3;break}return n.next=3,e.getMenuItemTop();case 3:if(t!=e.categorycurrent){n.next=5;break}return n.abrupt("return");case 5:e.scrollRightTop=e.oldScrollTop,e.$nextTick((function(){this.scrollRightTop=this.arr[t],this.categorycurrent=t,this.leftMenuStatus(t)}));case 7:case"end":return n.stop()}}),n)})))()},getElRect:function(e,n){var r=this;new Promise((function(i,a){var u=t.createSelectorQuery().in(r);u.select("."+e).fields({size:!0},(function(t){t?(r[n]=t.height,i()):setTimeout((function(){r.getElRect(e)}),10)})).exec()}))},observer:function(){var e=this;return u(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.tabs[1].tabbar.map((function(n,r){var i=t.createIntersectionObserver(e);i.relativeTo(".right-box",{top:0}).observe("#item"+r,(function(t){if(t.intersectionRatio>0){var n=t.id.substring(4);e.leftMenuStatus(n)}}))}));case 1:case"end":return n.stop()}}),n)})))()},leftMenuStatus:function(t){var e=this;return u(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.categorycurrent=t,0!=e.menuHeight&&0!=e.menuItemHeight){n.next=6;break}return n.next=4,e.getElRect("menu-scroll-view","menuHeight");case 4:return n.next=6,e.getElRect("u-tab-item","menuItemHeight");case 6:e.scrollTop=t*e.menuItemHeight+e.menuItemHeight/2-e.menuHeight/2;case 7:case"end":return n.stop()}}),n)})))()},getMenuItemTop:function(){var e=this;new Promise((function(n){var r=t.createSelectorQuery();r.selectAll(".class-item").boundingClientRect((function(t){t.length?t.forEach((function(r){e.arr.push(r.top-t[0].top),n()})):setTimeout((function(){e.getMenuItemTop()}),10)})).exec()}))},rightScroll:function(t){var e=this;return u(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.oldScrollTop=t.detail.scrollTop,0!=e.arr.length){n.next=4;break}return n.next=4,e.getMenuItemTop();case 4:if(!e.timer){n.next=6;break}return n.abrupt("return");case 6:if(e.menuHeight){n.next=9;break}return n.next=9,e.getElRect("menu-scroll-view","menuHeight");case 9:setTimeout((function(){e.timer=null;for(var n=t.detail.scrollTop+e.menuHeight/2,r=0;r<e.arr.length;r++){var i=e.arr[r],a=e.arr[r+1];if(!a||n>=i&&n<a)return void e.leftMenuStatus(r)}}),10);case 10:case"end":return n.stop()}}),n)})))()}}};e.default=s}).call(this,n("543d")["default"])},"343b":function(t,e,n){"use strict";var r=n("dab4"),i=n.n(r);i.a},"3d8d":function(t,e,n){},"74b4":function(t,e,n){"use strict";n.r(e);var r=n("1f35"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},a07c:function(t,e,n){"use strict";n.r(e);var r=n("f09f"),i=n("74b4");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("ea57"),n("343b");var u,s=n("f0c5"),o=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],u);e["default"]=o.exports},dab4:function(t,e,n){},ea57:function(t,e,n){"use strict";var r=n("3d8d"),i=n.n(r);i.a},f09f:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r}));var r={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"9f36f"))},uTabsSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-tabs-swiper/u-tabs-swiper")]).then(n.bind(null,"2b1f"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"d1e2"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"c61d"))}},i=function(){var t=this,e=t.$createElement;t._self._c},a=[]}},[["0c95","common/runtime","common/vendor"]]]);